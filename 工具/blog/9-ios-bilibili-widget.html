<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="icon" type="image/png" href="../Public/img/favicon.png">
<link rel="apple-touch-icon-precomposed" href="../Public/img/app-icon72x72@2x.png">
<title>自己动手做个iOS14小组件显示哔哩哔哩UP主粉丝数_蛙蛙工具</title>
<meta name="keywords" content="ios14小组件,哔哩哔哩实时粉丝数量" />
<meta name="description" content="自己动手使用APP &quot;Scriptable&quot;做个iOS14小组件，来显示哔哩哔哩UP主实时粉丝数量。如果你是一个bilibili UP主，肯定需要这个小组件，来关注自己的粉丝数量。" />
<link href="../Public/css/wawa.min.css@v=9d5f5e86cb.css" rel="stylesheet">
<script type="text/javascript" src="https://cdn.wwads.cn/js/makemoney.js" async></script><link href="../Public/css/blog.min.css@v=33133e7aa1.css" rel="stylesheet">
</head>

<body class="light">
<div class="header">
	<div class="header-int">
				<div class="logo">
			<a href="../index.html" title="返回蛙蛙工具首页"><img alt="蛙蛙工具" src="../Public/img/logo.png" srcset="../Public/img/logo@2x.png 2x" /></a>
			<h2>蛙蛙工具</h2>
			<p>便捷的在线工具网站</p>
		</div>
		<div class="menu">
			<div class="link"><a href="../index.html" >首页</a></div>
			<dl>
				<dt >文本工具</dt>
				<dd ><ul><li ><a href="../daxiaoxie.html">英文字母大小写转换</a></li><li ><a href="../textworkflow.html">文本处理工作流工具</a></li><li ><a href="../quchong.html">文本去重分隔工具</a></li><li ><a href="../textreplace.html">文本替换工具</a></li><li ><a href="../reversetext.html">文本反转排序工具</a></li><li ><a href="../xuhao.html">文本增加序号工具</a></li><li ><a href="../text2html.html">文本转HTML工具</a></li><li ><a href="../fuhao.html">特殊符号大全</a></li><li ><a href="../emoji.html">Emoji 表情大全</a></li><li ><a href="../fontchanger.html">花体英文转换器</a></li><li ><a href="../zishu.html">字数统计工具</a></li><li ><a href="../textcheck.html">内容重复率检测</a></li><li ><a href="../paiban.html">中英文排版纠正器</a></li><li ><a href="../cipin.html">词频统计工具</a></li></ul></dd>
			</dl><dl>
				<dt >语言工具</dt>
				<dd ><ul><li ><a href="../jianfanti.html">简体繁体转换工具</a></li><li ><a href="../pinyin.html">汉语拼音转换工具</a></li><li ><a href="../yuepin.html">粤语拼音转换工具</a></li><li ><a href="../chengyu.html">成语查询工具</a></li><li ><a href="../fanyi.html">在线翻译工具</a></li><li ><a href="../wubi.html">五笔编码查询</a></li><li ><a href="../shouzimu.html">拼音首字母缩写</a></li><li ><a href="../namepinyin.html">姓名拼音转换器</a></li><li ><a href="../englishnumbers.html">数字转英文工具</a></li><li ><a href="../xuechengyu.html">随机学成语</a></li><li ><a href="../shici.html">一句诗词</a></li><li ><a href="../lizhi.html">励志句子</a></li><li ><a href="../dujitang.html">毒鸡汤</a></li><li ><a href="../taici.html">经典影视台词</a></li><li ><a href="../sentence.html">随机英语句子</a></li></ul></dd>
			</dl><dl>
				<dt >财务工具</dt>
				<dd ><ul><li ><a href="../renminbi.html">人民币大写转换器</a></li><li ><a href="../riqidaxie.html">支票日期大写转换器</a></li><li ><a href="../yingwendaxie.html"> 英文金额大写转换器</a></li><li ><a href="../tax.html">税金税率计算器</a></li><li ><a href="../geshui.html">个人所得税计算器</a></li><li ><a href="../labortax.html">个人劳务报酬所得税</a></li><li ><a href="../huilv.html">货币汇率换算工具</a></li><li ><a href="../huobi.html">世界各国地区货币</a></li><li ><a href="../getsum.html">列表求和计算器</a></li><li ><a href="../payment.html">合同款项计算器</a></li><li ><a href="../loan.html">贷款计算器</a></li><li ><a href="../cnaps.html">银行联行号查询</a></li></ul></dd>
			</dl><dl>
				<dt >日期时间</dt>
				<dd ><ul><li ><a href="../workingday.html">工作日计算器</a></li><li ><a href="../riqi.html">日期时间计算器</a></li><li ><a href="../nongli.html">农历公历转换器</a></li><li ><a href="../timezone.html">世界时间转换器</a></li><li ><a href="../dateformat.html">英文日期格式转换</a></li><li ><a href="../timestamp.html">时间戳转换工具</a></li><li ><a href="../batchtimestamp.html">时间戳批量转换</a></li><li ><a href="../huangli.html">农历老黄历查询</a></li><li ><a href="../jieqi.html">二十四节气速查表</a></li><li ><a href="../holiday.html">2025年放假安排</a></li><li ><a href="../expirationdate.html">保质期计算器</a></li><li ><a href="../retireage.html">退休年龄计算器</a></li><li ><a href="../stopwatch.html">在线秒表</a></li></ul></dd>
			</dl><dl>
				<dt >换算工具</dt>
				<dd ><ul><li ><a href="../jinzhi.html">进制转换器</a></li><li ><a href="../changdu.html">长度单位换算器</a></li><li ><a href="../mianji.html">面积单位换算器</a></li><li ><a href="../zhongliang.html">重量单位换算器</a></li><li ><a href="../tiji.html">体积单位换算器</a></li><li ><a href="../midu.html">密度单位换算器</a></li><li ><a href="../wendu.html">温度单位换算器</a></li><li ><a href="../yali.html">压力单位换算器</a></li><li ><a href="../zijie.html">字节单位换算器</a></li><li ><a href="../shijian.html">时间单位换算器</a></li><li ><a href="../countunit.html">英文计数单位换算</a></li><li ><a href="../zuobiao.html">地理坐标系转换</a></li><li ><a href="../cuboid.html">矩形方体计算工具</a></li></ul></dd>
			</dl><dl>
				<dt >图像工具</dt>
				<dd ><ul><li ><a href="../ocr.html">图片识别文字工具</a></li><li ><a href="../qrcode.html">二维码生成器</a></li><li ><a href="../qrcodereader.html">二维码解码器</a></li><li ><a href="../barcode.html">通用条形码生成器</a></li><li ><a href="../isbn.html">ISBN条形码生成工具</a></li><li ><a href="../tinyimg.html">图片压缩工具</a></li></ul></dd>
			</dl><dl>
				<dt >便民查询</dt>
				<dd ><ul><li ><a href="../shouji.html">手机号码归属地查询</a></li><li ><a href="../dianhua.html">常用电话列表</a></li><li ><a href="../quhao.html">区号邮编查询工具</a></li><li ><a href="../shenfenzheng.html">身份证所在地查询</a></li><li ><a href="../daxue.html">全国高校信息查询</a></li><li ><a href="../countrycodes.html">国家地区代码</a></li><li ><a href="../shoudu.html">各国首都列表</a></li><li ><a href="../shicha.html">各国电话代码及时差</a></li><li ><a href="../fanying.html">反应速度测试工具</a></li><li ><a href="../xuexing.html">子女血型遗传查询</a></li><li ><a href="../oilprice.html">今日油价查询</a></li><li ><a href="../bmi.html">BMI体质指数计算</a></li></ul></dd>
			</dl><dl>
				<dt >开发工具</dt>
				<dd ><ul><li ><a href="../namingconverter.html">命名转换器</a></li><li ><a href="../jsoneditor.html">JSON编辑器</a></li><li ><a href="../cssformat.html">CSS在线格式化工具</a></li><li ><a href="../json.html">JSON代码格式化工具</a></li><li ><a href="../jsbeautify.html">JavaScript代码格式化</a></li><li ><a href="../htmlformat.html">HTML格式化工具</a></li><li ><a href="../sqlformatter.html">SQL格式化压缩工具</a></li><li ><a href="../regexp.html">正则表达式测试工具</a></li><li ><a href="../crontab.html">crontab执行时间计算</a></li><li ><a href="../color.html">颜色值转换工具</a></li><li ><a href="../json2typescript.html">JSON转TypeScript类型</a></li></ul></dd>
			</dl><dl>
				<dt >编码解码</dt>
				<dd ><ul><li ><a href="../base64.html">Base64编码解码工具</a></li><li ><a href="../md5.html">MD5加密工具</a></li><li ><a href="../aes.html">AES加密解密</a></li><li ><a href="../jiami.html">SHA1在线加密工具</a></li><li ><a href="../unicode.html">Ascii与Native编码转换</a></li><li ><a href="../quanjiaobanjiao.html">全角半角转换工具</a></li><li ><a href="../urldecode.html">URL解码编码</a></li><li ><a href="../morse.html">摩斯电码编码解码</a></li><li ><a href="../randompassword.html">随机密码生成工具</a></li><li ><a href="../randomnumber.html">随机数生成器</a></li><li ><a href="../guid.html">GUID生成工具</a></li></ul></dd>
			</dl><dl>
				<dt >网络工具</dt>
				<dd ><ul><li ><a href="../ip.html">IP地址查询工具</a></li><li ><a href="../whois.html">域名whois查询</a></li><li ><a href="../beian.html">域名备案查询</a></li><li ><a href="../weixincheck.html">微信域名拦截检测</a></li><li ><a href="../imgalt.html">ALT标签替换工具</a></li><li ><a href="../ua.html">User Agent信息查看</a></li><li ><a href="../getmobile.html">联系信息提取工具</a></li><li ><a href="../videoparser.html">视频下载地址解析</a></li><li ><a href="../openurl.html">批量打开网址工具</a></li></ul></dd>
			</dl>		</div>
		<div id="menu-btn"><i class="icon-menu"></i></div>
	</div>
</div>
<div class="content">
	<div class="content-body">
        <div class="blog-detail">
            <div class="blog-detail-title"><h1>自己动手做个iOS14小组件显示哔哩哔哩UP主粉丝数</h1></div>
            <div class="blog-detail-meta"><span>2020年10月07日</span> <span>11115次浏览</span></div>
            <div class="blog-datail-body">
                <p>
	<br />
</p>
<p>
	如果你是一个哔哩哔哩UP主，是否时时刻刻想知道自己有多少个粉丝呢？那就做一个吧。
</p>
<h3>
	需要用到“Scriptable”这个APP，免费无内购，请搜索安装。
</h3>
<p>
	<a href="https://apps.apple.com/cn/app/scriptable/id1405459188" target="_blank">https://apps.apple.com/cn/app/scriptable/id1405459188</a> 
</p>
<p>
	<br />
</p>
<h3>
	使用bilibili的API，http://api.bilibili.com/x/relation/stat?vmid=280793434
</h3>
<p>
	这里使用手工耿的ID测试，返回json格式结果：
</p>
<pre class="brush:;">{"code":0,"message":"0","ttl":1,"data":{"mid":280793434,"following":32,"whisper":0,"black":0,"follower":4573391}}</pre>
<p>
	<br />
</p>
<h3>
	这是站长写的javascript代码 <a href="../Uploads/Blog/2020/10-07/billibili.js" target="_blank">bilibili.js</a> 
</h3>
<pre class="brush:js;">// Variables used by Scriptable.
// These must be at the very top of the file. Do not edit.
// icon-color: pink; icon-glyph: tv;

const MID = args.widgetParameter || '280793434'//UP主MID，即个人空间网址后面那段数字 https://space.bilibili.com/280793434

let apiUrl = "http://api.bilibili.com/x/relation/stat?vmid="+MID
let data = await loadData()
let widget = await createWidget(data)

if (config.runsInApp) {
	widget.presentSmall();
}
Script.setWidget(widget)
Script.complete()

async function createWidget(data) {
	let widget = new ListWidget()
	widget.backgroundColor = Color.white()
	
	let header = widget.addStack()
	let icon = header.addImage(await loadImage('https://www.bilibili.com/favicon.ico'))
	icon.imageSize = new Size(15, 15)
	header.addSpacer(10)
	let title = header.addText("哔哩哔哩粉丝")
	title.textColor = Color.black()
	title.textOpacity = 0.9
	title.font = Font.lightSystemFont(14)
	widget.addSpacer(20)

	let flTxt = widget.addText(toThousands(data.data['follower']))
	flTxt.textColor = new Color("#fb7299")
	flTxt.font = Font.boldRoundedSystemFont(getFontSize(data.data['follower']))
	flTxt.centerAlignText()

	widget.addSpacer(20)

	let utTxt = widget.addText('更新于:'+nowTime())
	utTxt.textColor = Color.black()
	utTxt.font = Font.systemFont(12)
	utTxt.textOpacity = 0.5
	utTxt.centerAlignText()

	widget.url = 'bilibili://'

	return widget
}
  
async function loadData() {
	let req = new Request(apiUrl)
	req.allowInsecureRequest = true
	let json = await req.loadJSON()
	console.log(json)
	return json
}

async function loadImage(imgUrl) {
	console.log(imgUrl)
	let req = new Request(imgUrl)
	req.allowInsecureRequest = true
	let image = await req.loadImage()
	return image
}

function toThousands(num) {
	return (num || 0).toString().replace(/(\d)(?=(?:\d{3})+$)/g, '$1,');
}

function nowTime(){
	let date = new Date()
	return date.toLocaleTimeString('chinese', { hour12: false })
}

function getFontSize(num){
	if(num&lt;99){
		return 38
	}else if(num&lt;9999 &amp;&amp; num&gt;100){
		return 30
	}else if(num&lt;99999 &amp;&amp; num&gt;10000){
		return 28
	}else if(num&lt;999999 &amp;&amp; num&gt;100000){
		return 24
	}else if(num&lt;9999999 &amp;&amp; num&gt;1000000){
		return 22
	}else{
		return 20
	}
}</pre>
<p>
	<span><br />
</span> 
</p>
<p>
	<span>修改上面代码的MID和UPNAME参数，改为你需要关注的UP主信息。然后把上面的代码文件通过iCould复制到<span>Scriptable文件夹内，打开APP就能看到代码了。点击可运行查看效果。</span></span> 
</p>
<p>
	另外你也可以点击<span>Scriptable APP右上角的加号，新建一个代码，然后复制代码到编辑框保存即可。</span> 
</p>
<p>
	<span><br />
</span> 
</p>
<h3>
	<span>把小组件添加到桌面</span> 
</h3>
<p>
	<span>1.长按桌面空白的地方，点击左上角的加号。</span> 
</p>
<p>
	<span>2.在列表里找到<span>Scriptable，然后点击<span>添加</span>第一个小尺寸的组件。</span></span> 
</p>
<p>
	<span>3.这时桌面就出现一个空白的<span>Scriptable小组件，点击这个组件，</span>在弹窗的界面里面点击“选取”，然后找到你刚刚上传的脚本，Parameter处填入你B站的MID即可。</span> 
</p>
<p>
	<span><img src="../Uploads/Content/Blog/2020/10-13/5f850dac7c608.jpg" alt="" /><br />
</span> 
</p>
<p>
	<span></span> 
</p>
<h3>
	<br />
小组件运行效果
</h3>
<p>
	<img src="../Uploads/Content/Blog/2020/10-13/5f850db5736ac.jpg" alt="" /> 
</p>
<p>
	<span><br />
</span> 
</p>
<p>
	<span>另外要说明一点，iOS的小组件不是实时更新的，应该<span>有个更新机制，但我没有深入了解</span>。</span> 
</p>
<p>
	<span><br />
</span> 
</p>
<p>
	<span>Scriptable这个APP还挺好玩的，我另外还做个小组件显示网站的实时访问数据。有兴趣进一步了解的朋友请看文档。</span> 
</p>
<p>
	<a href="https://docs.scriptable.app/alert/" target="_blank">https://docs.scriptable.app/alert/</a> 
</p>            </div>
            <div class="blog-datail-tags">Tags: <a href="ios.html">ios</a></div>
			<div class="blog-datail-foot">
				<p>上一篇：<a href="10-scriptable.html">[iOS]scriptable小组件项目和讨论组推荐</a><p>				<p>下一篇：<a href="7-excel-split-tool.html">做了一个把Excel文件拆分成N等份的小工具(附下载)</a><p>			</div>
			<div class="blog-datail-back"><a href="index.html"><i class="icon-menu"></i>返回列表</a></div>
        </div>
		
	</div>
	<div class="footer">
	<div class="footer-nav"><a href="../about.html">关于</a><span>-</span><a href="../support.html">赞赏</a><span>-</span><a href="../feedback.html">反馈</a><span>-</span><a href="../user/index.html" rel="nofollow">会员</a><span>-</span><a href="../shop/index.html">摆个摊</a><span>-</span><a href="index.html">文章</a></div>
	<p>Copyright © 2025 蛙蛙工具-阿粥的技术分享 版权所有   <a href="https://beian.miit.gov.cn/" target="_blank" rel="nofollow">粤ICP备18006158号</a></p>
</div>

<div class="scroll-nav">
	<a id="go-top"><i class="icon-up-big"></i><p>返回顶部</p></a>
	<a id="theme-toggle"><i class="icon-sun-inv"></i><p>切换主题</p></a>
    <a href="../user/index.html" rel="nofollow"><i class="icon-user"></i><p>会员中心</p></a>
	<a href="../feedback.html"><i class="icon-chat"></i><p>建议反馈</p></a>
</div>
</div>
<script type="text/javascript">var WW_APP='/';var WW_PUBLIC='/Public/';var WW_URL='/home/blog/';var WW_TID=0;var WW_UID=0;var WW_VIP=0;var WW_SBS=1;</script>
<script src="../Public/js/public.min.js@v=c4da3f0b4e"></script>
</body>
</html>
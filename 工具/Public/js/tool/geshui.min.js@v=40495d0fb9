function incomeChange(){var a=$("#valIncome").val();if(!isNaN(a)){var l=$("#valPeriod").val();$("#valIncomeAll").html(a*l)}}function insureChange(){var a=$("#valInsure").val();if(!isNaN(a)){var l=$("#valPeriod").val();$("#valInsureAll").html(a*l)}}function deductionChange(){var a=$("#valDeduction").val();if(!isNaN(a)){var l=$("#valPeriod").val();$("#valDeductionAll").html(a*l)}}function geshui(){var a=parseFloat($("#valIncome").val());if(isNaN(a))return tips_error("请填写税前工资！"),$("#valIncome").focus(),$("#valIncome").select(),$("#tool-result").hide(),!1;var l=parseFloat($("#valInsure").val());isNaN(l)&&(tips_error("请填写五险一金金额，若无填0。"),$("#valInsure").focus(),$("#valInsure").select(),$("#tool-result").hide());var e=parseFloat($("#valDeduction").val());if(isNaN(e))return tips_error("请填写专项附加扣除，若无填0。"),$("#valDeduction").focus(),$("#valDeduction").select(),$("#tool-result").hide(),!1;var t,r,o=parseFloat($("#valPeriod").val()),v=(a=parseFloat($("#valIncome").val()),parseFloat(a*o)),n=v-a,i=(l=parseFloat($("#valInsure").val()),parseFloat(l*o)),s=i-l,u=(e=parseFloat($("#valDeduction").val()),parseFloat(e*o)),c=u-e,d=v-i-u-5e3*o,h=d,m=calcRQ(h=h.toFixed(2)),f=d*(t=m[0])-(r=m[1]);f=Math.round(100*f)/100;var p=0,I=0;if(1<o){var F=I=n-s-c-5e3*(o-1);p=I*(m=calcRQ(F=F.toFixed(2)))[0]-m[1],p=Math.round(100*p)/100}tax=f-p,tax=Math.round(100*tax)/100,taxTmp=0<tax?tax:0;var N=a-l-taxTmp;N=Math.round(100*N)/100;var x="";x+="应纳税所得额："+d.toFixed(2)+"元<br/>",x+="适用税率："+100*t+"%<br/>",x+="速算扣除数："+r+"元<br/>",x+="累计应缴税款："+f+"元<br/>",x+="累计已缴税款："+p+"元<br/>",x+="应补(退)税款："+tax+"元<br/>",x+="实发工资："+N+"元",tips_clear(),$("#tool-result").show(),$("#tool-result").html(x)}function calcRQ(a){return a<=36e3?(R=.03,Q=0):36e3<a&&a<=144e3?(R=.1,Q=2520):144e3<a&&a<=3e5?(R=.2,Q=16920):3e5<a&&a<=42e4?(R=.25,Q=31920):42e4<a&&a<=66e4?(R=.3,Q=52920):66e4<a&&a<=96e4?(R=.35,Q=85920):(R=.45,Q=181920),new Array(R,Q)}function reset_geshui(){$("#tool-result").hide(),$("#valIncome").val(""),$("#valInsure").val(""),$("#valDeduction").val(""),$("#valIncomeAll").html(0),$("#valInsureAll").html(0),$("#valDeductionAll").html(0)}$(function(){var a=new Date;month=a.getMonth()+1,$("#valPeriod").val(a.getMonth()+1)});
var timerID,startTime=new Date,endTime=new Date,startPressed=!1,bgChangeStarted=!1,maxWait=20,colors=new Array("tomato","chocolate","limegreen","crimson","darkslategray","aliceblue","mediumslateblue","cornflowerblue","darkorchid","darkkhaki","coral","darkolivegreen","cadetblue"),records=new Array;function startTest(){$("#color-div").css({"background-color":colors[Math.floor(Math.random()*colors.length)]}),$("#color-div").html(" "),bgChangeStarted=!0,startTime=new Date}function remark(e){var r="";return e<120&&(r="100-满分"),120<=e&&e<280&&(r="90-优秀"),280<=e&&e<320&&(r="80-尚可"),320<=e&&e<400&&(r="70-一般"),400<=e&&e<450&&(r="60-及格"),450<=e&&e<650&&(r="50-不及格"),650<=e&&e<1e3&&(r="40-很差"),1e3<=e&&(r="0-极差"),r}function getEva(e){var r=e.length,t=e.reduce(function(e,r){return e+r},0),a=parseInt(t/r);$("#eva").html("测试次数:"+r+" ， 平均时间:"+a+"毫秒")}function stopTest(){if(bgChangeStarted){var e=(endTime=new Date).getTime()-startTime.getTime()-20;records.push(e),getEva(records),$("#color-div").css({"background-color":"white"}),$("#tool-result").show(),$("#res").prepend(e+"毫秒：评分"+remark(e)+"<br/>"),bgChangeStarted=startPressed=!1,$("#btn-start").show(),$("#btn-stop").hide()}else startPressed?(clearTimeout(timerID),startPressed=!1,tips_error("可别作弊哦，颜色还没有开始变呢,请重新开始！")):tips_error("请按'开始'键"),$("#btn-start").show(),$("#btn-stop").hide(),$("#color-div").html(" ")}var randMULTIPLIER=22695477,randINCREMENT=1,today=new Date,randSeed=today.getSeconds();function randNumber(){return((randSeed=(randMULTIPLIER*randSeed+randINCREMENT)%(1<<31))>>15&32767)/32767}function start(){tips_clear(),$("#btn-start").hide(),$("#btn-stop").show(),$("#color-div").html('<i class="icon-spin5 animate-spin hide"></i>'),startPressed?tips_error("已经开始了，请变色后按停止！"):(startPressed=!0,timerID=setTimeout("startTest()",8e3*randNumber()))}function clear_res(){records=new Array,$("#eva").html(""),$("#res").html(""),$("#tool-result").hide()}document.onkeydown=function(e){var r=e||window.event||arguments.callee.caller.arguments[0];r&&65==r.keyCode&&start(),r&&76==r.keyCode&&stopTest()};
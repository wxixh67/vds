$("#tool-text").on("input propertychange",function(){for(var t=$(this).val().replace(/\r\n/g,"\n"),h=t.replace(/\n/g,""),n=t.match(/[\u4e00-\u9fa5]/g)||[],e=t.match(/\b\w+\b/g)||[],r=t.match(/\b\d+\b/g)||[],a=h.match(/[|\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\.|\>|\/|\?]/g)||[],l=0,o=0;o<h.length;o++){h.charAt(o).match(/[^\x00-\xff]/)&&l++}var g=(h.match(/[A-Za-z]/g)||[]).length,c=(h.match(/[0-9]/g)||[]).length,m=t.byteLengthUTF8(),i=t.byteLengthGBK();$("#total_count").html(countText(t)),$("#total_cn").html(n.length),$("#total_en").html(g),$("#total_cn_p").html(l-n.length),$("#total_en_p").html(a.length),$("#total_words").html(e.length-r.length),$("#total_number").html(c),$("#total_char_utf8").html(m),$("#total_char_gbk").html(i)}),String.prototype.byteLengthUTF8=function(){for(var t=0,h=0;h<this.length;h++){var n=this.charCodeAt(h);t+=n<=127?1:n<=2047?2:3}return t},String.prototype.byteLengthGBK=function(){for(var t=0,h=0;h<this.length;h++){t+=this.charCodeAt(h)<=127?1:2}return t};function countText(a) {try{var r = /[\p{Script=Han}]|[^\p{Script=Han}\s]+/gu;var m = a.match(r);return m ? m.length : 0;} catch (e) {var e = /[\u4E00-\u9FFF]|[^\u4E00-\u9FFF\s]+/g;var m2 = a.match(e);return m2 ? m2.length : 0;}};
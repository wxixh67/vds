function replaceObjectNames(t){const e=getObjectsStack();return e&&e.forEach(e=>{t=t.replace(`%${e.name}%`,setCamelCase(e.name))}),t}function mapper(t,e,n){e&&Array.isArray(t)&&(t={myObject2:t});let r=setInitialInterface(t,n);for(var a in t){let e=a,n=getType(t[e],e);r+=`     ${e}${n.optional?"?":""}: ${n.type};\n`}return r+=setEndInterface(t)}function setInitialInterface(t,e){return`export interface ${e?setCamelCase(e):"MyObject"} {\n`}function validadeNameAttribute(t){return t.replace(/[^a-zA-Z0-9]/g,"_")}function setEndInterface(t){return"};\n\n"}function isValidJson(t){try{JSON.parse(t)}catch(t){return!1}return!0}function showMessage(t){alert(t)}function getType(t,e){switch(typeof t){case"undefined":return{type:"undefined",optional:!0};case"boolean":return{type:"boolean"};case"object":if(null===t)return{type:"any",optional:!0};if(JSON.stringify(t)===JSON.stringify({}))return{type:"any",optional:!0};if(isArray(t)){if(t.length>0){let n=getType(t[0],e);return{type:`Array<${n.type}>`,optional:n.optional}}return{type:"Array<any>",optional:!0}}return addObjectStack(t,e),{type:`%${e}%`};case"number":return{type:"number"};case"function":return{type:"Function"};case"string":return isDate(t)?{type:"Date"}:0==t.length?{type:"any",optional:!0}:"("==t[t.length-2]&&")"==t[t.length-1]?{type:"Function"}:{type:"string"}}}function isDate(t){const e=new Date(t);return!(`${t}`.length<10||"Invalid Date"==e)}function isArray(t){return!!Array.isArray(t)}function setCamelCase(t){return`${t}`.charAt(0).toUpperCase()+`${t}`.slice(1)}function addObjectStack(t,e){let n=getObjectsStack();n||(n=[]);let r=n.length;return n.push({name:e,object:t}),localStorage.setItem("stack",JSON.stringify(n)),r}function getObjectsStack(t){return JSON.parse(localStorage.getItem("stack"))}function clearStack(){return localStorage.clear()}function setNullObjectStack(t){let e=getObjectsStack();e[t].object=null,localStorage.setItem("stack",JSON.stringify(e))}function removeNullObjectsStack(){let t=getObjectsStack(),e=[];t.forEach(t=>{null!=t.object&&e.push(t)}),localStorage.setItem("stack",JSON.stringify(e))}function json2typecode(){var t=$.trim($("#tool-form").val());if(""==t)return tips_error("请填写需要转换的JSON代码！"),$("#tool-form").focus(),!1;var e="";if(clearStack(),!isValidJson(t))return void tips_error("JSON代码格式错误！");const n=JSON.parse(t);for(e+=mapper(n,!0);;){let t=getObjectsStack();if(!t)break;if(t.forEach((t,n)=>{e+=mapper(t.object,!1,t.name),setNullObjectStack(n)}),e=replaceObjectNames(e),removeNullObjectsStack(),!getObjectsStack()||0==getObjectsStack().length)break}$("#tool-result").val(e),tips_clear()}
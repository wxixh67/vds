$(function(){var f=$("#start_year"),c=$("#start_month"),d=$("#start_day"),u=$("#start_hour"),_=$("#start_minute"),v=$("#end_year"),p=$("#end_month"),h=$("#end_day"),Y=$("#end_hour"),y=$("#end_minute");f.val(moment().startOf("month").format("YYYY")),c.val(moment().startOf("month").format("MM")),d.val(moment().startOf("month").format("DD")),v.val(moment().endOf("month").format("YYYY")),p.val(moment().endOf("month").format("MM")),h.val(moment().endOf("month").format("DD")),f.change(function(){selectYmd(f,c,d)}),c.change(function(){selectYmd(f,c,d)}),v.change(function(){selectYmd(v,p,h)}),p.change(function(){selectYmd(v,p,h)});var g=$("#btn-get-interval");g.click(function(){var t=f.val(),e=c.val(),r=d.val(),a=u.val(),n=_.val(),o=v.val(),s=p.val(),l=h.val(),m=Y.val(),i=y.val();return""==t?(tips_error("请填写开始年份！"),f.focus(),!1):""==e?(tips_error("请填写开始月份！"),c.focus(),!1):""==r?(tips_error("请填写开始日子！"),d.focus(),!1):""==a?(tips_error("请填写开始小时！"),u.focus(),!1):""==n?(tips_error("请填写开始分钟！"),_.focus(),!1):""==o?(tips_error("请填写结束年份！"),v.focus(),!1):""==s?(tips_error("请填写结束月份！"),p.focus(),!1):""==l?(tips_error("请填写结束日子！"),h.focus(),!1):""==m?(tips_error("请填写结束小时！"),Y.focus(),!1):""==i?(tips_error("请填写结束分钟！"),y.focus(),!1):(g.attr("disabled","disabled"),tips_loading(),void $.ajax({type:"post",dataType:"json",data:{start_date:t+"-"+e+"-"+r+" "+a+":"+n+":00",end_date:o+"-"+s+"-"+l+" "+m+":"+i+":00"},url:WW_URL+"ajax",success:function(t){1==t.status?(tips_clear(),$("#tool-result").show(),$("#tool-result").html(t.data)):($("#tool-result").hide(),tips_error(t.info)),g.removeAttr("disabled","disabled")}}))});var l=$("#from_year"),m=$("#from_month"),i=$("#from_day");l.val(moment().format("YYYY")),m.val(moment().format("MM")),i.val(moment().format("DD")),l.change(function(){selectYmd(l,m,i)}),m.change(function(){selectYmd(l,m,i)});var t=$("#btn-get-date"),D=$("#tool-tips2");t.click(function(){var t=parseInt(l.val()),e=parseInt(m.val()),r=parseInt(i.val()),a=$("select[name='from_type']").val(),n=parseInt($("input[name='from_days']").val()),o=$("select[name='from_day_type']").val();if(""==t)return tips_error("请填写开始年份！",D),l.focus(),!1;if(""==e)return tips_error("请填写开始月份！",D),m.focus(),!1;if(""==r)return tips_error("请填写开始日子！",D),i.focus(),!1;if(n<0)return tips_error("请填写正确的条件！",D),$("input[name='from_days']").focus(),!1;if("Invalid Date"==new Date(t,e-1,r))return tips_error("请输入正确的日期！",D),!1;var s=n*a;1==o&&(end_date=new Date(t,e-1,r+s)),2==o&&(end_date=new Date(t,e-1,r+7*s)),3==o&&(end_date=new Date(t,e-1+s,r)),tips_clear(D),$("#tool-result2").show(),moment.locale("zh-cn"),$("#tool-result2").html(moment(end_date).format("YYYY-MM-DD dddd"))})});var week_cn=new Array("日","一","二","三","四","五","六","日");function get_week(t){return week_cn[t]}function get_date_string(t){return t.getFullYear()+"年"+(1+t.getMonth())+"月"+t.getDate()+"日 星期"+get_week(t.getDay())}function initSelect(t,e,r){for(var a=e;a<=r;a++){var n=a.toString();a<=9&&(n="0"+n),t.append($("<option>",{value:n,text:n}))}}function selectYmd(t,e,r){var a,n=parseInt(e.val());parseInt(r.val());4==n||6==n||9==n||11==n?a=30:2==n?(a=28,y=parseInt(t.val()),(y%4==0&&y%100!=0||y%400==0)&&(a=29)):a=31,r.empty(),initSelect(r,1,a)}
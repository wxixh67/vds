function build_regex(){var e="";return $("#option_global").prop("checked")&&(e="g"),$("#option_ignore").prop("checked")&&(e+="i"),new RegExp($("#text_pattern").val(),e)}function regexp_test(){var e=$("#tool-text"),r=$("#tool-result");if(null==e.val()||e.val().length<1)return e.focus(),tips_error("请输入要匹配的文本"),!1;var t=$("#text_pattern");if(null==t.val()||t.val().length<1)return t.focus(),tips_error("请输入正则表达式"),!1;r.val("");var l=build_regex(),n=e.val().match(l);if(null==n||0==n.length)return r.val("[没有匹配内容]"),!1;var o="";if($("#option_global").prop("checked")){o="共找到 "+n.length+" 处匹配：\r\n";for(var a=0;a<n.length;++a)o=o+n[a]+"\r\n"}else o="匹配位置："+l.lastIndex+"\r\n匹配结果："+n[0];return r.val(o),!0}
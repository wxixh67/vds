var t=[0,0,0,0,0,0,0,1,1,0,0],firstsplitflag=0,btn_action=$("#btn-action"),split_result=$("#split-result"),page_title=document.title,prev=0;function action_watch(){if(t[t[2]]=(new Date).valueOf(),t[2]=1-t[2],0==t[2]){clearInterval(t[4]),t[3]+=t[1]-t[0],btn_action.html("继续");var a=t[7]++,l=t[9]+t[1]-t[0]-prev;prev=t[9]=t[9]+t[1]-t[0];var e='<li class="green"><span class="fl"><i class="icon-stop-circle-o"></i>记录'+a+'</span><span class="fr">'+format_watch(t[9])+'</span><span class="fr interval">+'+l/1e3+"S</span></li>";split_result.append(e),t[4]=t[1]=t[0]=0,display_watch(),firstsplitflag=0}else btn_action.html("暂停"),t[4]=setInterval(display_watch,43);1==t[7]&&1==t[8]||split_result.show()}function split_watch(){if(0!==t[2]){var a=t[8]++,l=t[3]+t[1]-t[0]-prev;prev=t[3]+t[1]-t[0];var e='<li class="yellow"><span class="fl"><i class="icon-clock"></i>计次'+a+'</span><span class="fr">'+format_watch(t[3]+t[1]-t[0])+'</span><span class="fr interval">+'+l/1e3+"s</span></li>";split_result.append(e)}1==t[7]&&1==t[8]||split_result.show()}function reset_time(){t[2]&&(t[1]=(new Date).valueOf()),t[4]=t[3]=t[2]=t[1]=t[0]=t[9]=0}function reset_watch(){t[2]&&action_watch(),t[4]=t[3]=t[2]=t[1]=t[0]=t[9]=0,display_watch(),split_result.html(""),t[7]=1,t[8]=1,prev=0,split_result.hide(),btn_action.html("开始")}function display_watch(){t[2]&&(t[1]=(new Date).valueOf()),t[6].val(format_watch(t[3]+t[1]-t[0])),document.title=format_watch(t[3]+t[1]-t[0])+"  "+page_title}function format_watch(a){for(var l=new Date(a+t[5]).toString().replace(/.*([0-9][0-9]:[0-9][0-9]:[0-9][0-9]).*/,"$1"),e=String(a%1e3);e.length<3;)e="0"+e;return l+="."+e}function load_watch(){t[5]=new Date(1970,1,1,0,0,0,0).valueOf(),t[6]=$("#stopwatch-display")}btn_action.click(function(){action_watch()}),$("#btn-split").click(function(){split_watch()}),$("#btn-clear").click(function(){reset_watch()}),$("#btn-toggle").click(function(){var t=$("#stopwatch");t.hasClass("full-screen")?(t.removeClass("full-screen"),$(this).html("全屏")):(t.addClass("full-screen"),$(this).html("退出"))}),load_watch(),document.onkeydown=function(t){var a=t||window.event||arguments.callee.caller.arguments[0];a&&65==a.keyCode&&action_watch(),a&&83==a.keyCode&&split_watch(),a&&67==a.keyCode&&reset_watch()};
var MersenneTwister=function(t){null==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(t)};function prefixZero(t,r){return String(t).length>r?t:(Array(r).join(0)+t).slice(-r)}function generateNumberFormArray(t,r,e,n,i){for(var s=t.split(" "),h=[],a=0;a<r;a++){var m=Math.random()*s.length>>0,o=s.splice(m,1);h.includes(o)&&1==e?a--:h.push(o)}1==n&&h.sort(function(t,r){return t-r});var u="";for(a=0;a<h.length;a++)u+=(0==a?"":" ")+h[a];return u}function getFormArray(t){var r=$.trim($("input[name='number_string']").val()),e=parseInt($("input[name='number_count']").val()),n=parseInt($("input[name='type']:checked").val()),i=parseInt($("input[name='sort']:checked").val()),s=parseInt($("input[name='prefixzero']:checked").val());if(""==r)return tips_error("请填写指定数字，用空格分隔每个数字，如：1 8 10 26 29"),!1;if(e<1)return tips_error("生成个数必须≥1"),!1;if(r.split(" ").length<e)return tips_error("生成个数必须 ≤ 数字个数"),!1;var h=generateNumberFormArray(r,e,n,i,s);tips_clear(),$("#tool-result").html(h),$("#tool-result").show()}function generateNumberFormRange(t,r,e,n,i,s){for(var h=new MersenneTwister,a=new Array,m=0;m<e;m++){var o=Math.round(h.random()*(r-t))+t;a.includes(o)&&1==n?m--:a.push(o)}1==i&&a.sort(function(t,r){return t-r});var u=String(r).length,p="";for(m=0;m<a.length;m++)p+=0==m?"":" ",p+=1==s?prefixZero(a[m],u):a[m];return p}function getFormRange(t){var r=parseInt($("input[name='min_number']").val()),e=parseInt($("input[name='max_number']").val()),n=parseInt($("input[name='number_count']").val()),i=parseInt($("input[name='type']:checked").val()),s=parseInt($("input[name='sort']:checked").val()),h=parseInt($("input[name='prefixzero']:checked").val()),a=/^\d+$/.test(r),m=/^\d+$/.test(e),o=/^\d+$/.test(n);if(1!=a||1!=m||1!=o)return tips_error("每项都必须填写正整数"),!1;if(r<0)return tips_error("数字范围最小值必须≥0"),!1;if(e<1)return tips_error("数字范围最大值必须≥1"),!1;if(n<1)return tips_error("每组个数必须≥1"),!1;if(200<t)return tips_error("生成行数必须≤200"),!1;if(e<=r)return tips_error("数字范围最大值必须大于最小值"),!1;if(1==i&&e+1-r<n)return tips_error("每组个数必须 ≤ (最大值 - 最小值)"),!1;if(e<=n&&1<t&&1==s)return tips_error("当最大值 ≥ 最小值时，只能生成一行；或者取消自动排序选项"),!1;if(1==n&&e<t)return tips_error("当每组个数为1时，生成行数不能 > 最大值"),!1;for(var u="",p=new Array,f=0;f<t;f++){var l=generateNumberFormRange(r,e,n,i,s,h);p.includes(l)?f--:p.push(l)}for(f=0;f<p.length;f++)u+=p[f]+"<br>";tips_clear(),$("#tool-result").html(u),$("#tool-result").show()}MersenneTwister.prototype.init_genrand=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0}},MersenneTwister.prototype.init_by_array=function(t,r){var e,n,i;for(this.init_genrand(19650218),e=1,n=0,i=this.N>r?this.N:r;i;i--){var s=this.mt[e-1]^this.mt[e-1]>>>30;this.mt[e]=this.mt[e]^(1664525*((4294901760&s)>>>16)<<16)+1664525*(65535&s),t[n],this.mt[e]>>>=0,n++,++e>=this.N&&(this.mt[0]=this.mt[this.N-1],e=1),r<=n&&(n=0)}for(i=this.N-1;i;i--){s=this.mt[e-1]^this.mt[e-1]>>>30;this.mt[e]=(this.mt[e]^(1566083941*((4294901760&s)>>>16)<<16)+1566083941*(65535&s))-e,this.mt[e]>>>=0,++e>=this.N&&(this.mt[0]=this.mt[this.N-1],e=1)}this.mt[0]=2147483648},MersenneTwister.prototype.genrand_int32=function(){var t,r=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var e;for(this.mti==this.N+1&&this.init_genrand(5489),e=0;e<this.N-this.M;e++)t=this.mt[e]&this.UPPER_MASK|this.mt[e+1]&this.LOWER_MASK,this.mt[e]=this.mt[e+this.M]^t>>>1^r[1&t];for(;e<this.N-1;e++)t=this.mt[e]&this.UPPER_MASK|this.mt[e+1]&this.LOWER_MASK,this.mt[e]=this.mt[e+(this.M-this.N)]^t>>>1^r[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^r[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},MersenneTwister.prototype.genrand_int31=function(){return this.genrand_int32()>>>1},MersenneTwister.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},MersenneTwister.prototype.random=function(){return this.genrand_int32()*(1/4294967296)},MersenneTwister.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},MersenneTwister.prototype.genrand_res53=function(){return 1/9007199254740992*(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))},$(document).ready(function(){$("input[name='number_type']").change(function(){"range"==$(this).val()?($(".number-range").slideDown("fast"),$(".number-string").slideUp("fast")):($(".number-range").slideUp("fast"),$(".number-string").slideDown("fast"))}),$("#btn-submit").click(function(){var t=$("input[name='number_type']:checked").val(),r=parseInt($("input[name='item_count']").val());"range"==t?getFormRange(r):getFormArray(r)})});
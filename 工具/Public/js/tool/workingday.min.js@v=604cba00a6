$("#start_date").cxCalendar({startDate:"2018-01-01",endDate:"2026-12-31"}),$("#end_date").cxCalendar({startDate:"2018-01-01",endDate:"2026-12-31"}),$("#from_date").cxCalendar({startDate:"2018-01-01",endDate:"2026-12-31"}),$(function(){$("input[name='start_date']").val(moment().startOf("month").format("YYYY-MM-DD")),$("input[name='end_date']").val(moment().endOf("month").format("YYYY-MM-DD"));var s=$("#btn-get-days");$("#btn-this-month").click(function(){$("input[name='start_date']").val(moment().startOf("month").format("YYYY-MM-DD")),$("input[name='end_date']").val(moment().endOf("month").format("YYYY-MM-DD")),s.click()}),$("#btn-last-month").click(function(){$("input[name='start_date']").val(moment().subtract(1,"month").startOf("month").format("YYYY-MM-DD")),$("input[name='end_date']").val(moment().subtract(1,"month").endOf("month").format("YYYY-MM-DD")),s.click()}),$("#btn-next-month").click(function(){$("input[name='start_date']").val(moment().subtract(-1,"month").startOf("month").format("YYYY-MM-DD")),$("input[name='end_date']").val(moment().subtract(-1,"month").endOf("month").format("YYYY-MM-DD")),s.click()}),s.click(function(){var t=$("input[name='start_date']").val(),a=$("input[name='end_date']").val();return""==t?(tips_error("请填写开始日期！"),$("input[name='start_date']").focus(),!1):""==a?(tips_error("请填写结束日期！"),$("input[name='end_date']").focus(),!1):(s.attr("disabled","disabled"),tips_loading(),void $.ajax({type:"post",dataType:"json",data:{start_date:t,end_date:a},url:WW_URL+"ajax",success:function(t){if(1==t.status){tips_clear();var a=t.data,e="<p><b style='font-size:24px;'>"+a.working_date_count+"</b>个工作日</p>";if(e+="<p>日期区间："+a.date_range+"<br/>合计天数："+a.date_count+"<br/>周末天数："+a.weekend_date_count+"<br/>法定假日："+a.holiday_date_count+"<br/>调休上班："+a.tune_date_count+"<br/>带薪假期："+a.with_wage_holiday_count+"<br/>计薪天数："+a.with_wage_date_count+"</p>",0<a.weekend_date_count){e+="<p><br/>周末放假:(已排除重叠的节日)<br/>";for(var n=a.weekend_date_list,r=0;r<n.length;r++)e+=n[r].date+"："+n[r].weekday+"<br/>";e+="</p>"}if(0<a.holiday_date_count){e+="<p><br/>节日放假:<br/>";var d=a.holiday_date_list;for(r=0;r<d.length;r++)e+=d[r].date+"："+d[r].remark+"("+d[r].weekday+")",1==d[r].is_wage&&(e+="(带薪)"),e+="<br/>";e+="</p>"}if(0<a.tune_date_count){e+="<p><br/>调休上班:<br/>";var o=a.tune_date_list;for(r=0;r<o.length;r++)e+=o[r].date+"："+o[r].remark+"("+o[r].weekday+")<br/>";e+="</p>"}$("#tool-result").show(),$("#tool-result").html(e)}else $("#tool-result").hide(),tips_error(t.info);s.removeAttr("disabled","disabled")}}))}),$("input[name='from_date']").val(moment().startOf("month").format("YYYY-MM-DD"));var i=$("#btn-get-date"),m=$("#tool-tips2");i.click(function(){var t=$("input[name='from_date']").val(),a=$("input[name='work_days']").val();return""==t?(tips_error("请填写开始日期！",m),$("input[name='from_date']").focus(),!1):""==a?(tips_error("请填写工作天数！",m),$("input[name='work_days']").focus(),!1):a<2||300<a?(tips_error("工作天数需要在2~300之间！",m),$("input[name='work_days']").focus(),!1):(i.attr("disabled","disabled"),tips_loading(m),void $.ajax({type:"post",dataType:"json",data:{from_date:t,work_days:a},url:WW_URL+"ajax_date",success:function(t){if(1==t.status){tips_clear(m);var a=t.data,e=a.from_date,n=a.last_date,r="<p>从<b>"+e.date+"("+e.weekday+")</b>开始，工作满<b>"+a.work_days+"</b>个工作日，最后一天是<b>"+n.date+"("+n.weekday+")</b>。</p>";if(r+="<p>日期区间："+e.date+" ~ "+n.date+"<br/>合计天数："+a.date_count+"<br/>工作天数："+a.work_days+"</p>",r+="<p>提示：统计时包含"+e.date+"、"+n.date+"这两天</p>",0<a.work_days){r+="<p><br/>上班日期:<br/>";for(var d=a.list,o=0;o<d.length;o++)r+=d[o].date+"："+d[o].remark+"("+d[o].weekday+")<br/>";r+="</p>"}$("#tool-result2").show(),$("#tool-result2").html(r)}else $("#tool-result2").hide(),tips_error(t.info,m);i.removeAttr("disabled","disabled")}}))})});
(function () {
    function isMobile() {
      // 获取浏览器的 userAgent
      const userAgent = navigator.userAgent.toLowerCase();

      // 判断是否是移动设备
      return /iphone|ipod|ipad|android|blackberry|windows phone|opera mini|mobile|tablet/i.test(
        userAgent
      );
    }

    fetch("/zmkj-utils/params-wrapper.php")
      .then((response) => response.json())
      .then((data) => {
        const openProductPurchaseTips = data.openProductPurchaseTips;
        const productNameKeywordFuzzyMatching =
          data.productNameKeywordFuzzyMatching;
        const productPurchaseTipsContent = data.productPurchaseTipsContent;
        
        const productNameKeywordFuzzyMatchingArray = productNameKeywordFuzzyMatching ? productNameKeywordFuzzyMatching.split('|') : null;
        const productPurchaseTipsContentArray = productPurchaseTipsContent ? productPurchaseTipsContent.split('|') : null;

        if (openProductPurchaseTips === "1") {
          if (isMobile()) {
            // console.log("当前是移动端设备");
            (function () {
                let popupWindow;
                let title;
                let timeoutId;
                let popupMessage;
                const fullUrl = window.location.href;
                if (fullUrl.includes('/item/')) {
                    // console.log('URL 包含 "/item/"');
                    document.addEventListener("click", function () {
                         title = document.querySelector(".layout-home .page-content .goods-name.line-2");
                        if (!title) return;
                        console.log(title);
                        
                        if (!popupWindow) {
                            // 创建弹窗
                            const popup = document.createElement("div");
                            popup.classList.add("popup-zmkj");
        
                            // 使用 JavaScript 设置弹窗样式
                            popup.style.position = "fixed";
                            popup.style.top = "20px";
                            popup.style.left = "50%";
                            popup.style.transform = "translateX(-50%)";
                            popup.style.backgroundColor = "#fff";
                            popup.style.border = "1px solid #ccc";
                            popup.style.padding = "20px";
                            popup.style.boxShadow = "0 2px 10px rgba(0, 0, 0, 0.1)";
                            popup.style.borderRadius = "8px";
                            popup.style.zIndex = "9999";
                            popup.style.width = "280px";
                            popup.style.textAlign = "center";
                            
                            // 弹窗内容
                            const message = document.createElement("div");
                            message.classList.add("title");
                            message.style.fontSize = "16px";
                            
                            if (productNameKeywordFuzzyMatchingArray) {
                                
                                let titleContent = '';
                                
                                for (let i = 0; i < productNameKeywordFuzzyMatchingArray.length; i++) {
                                    if (title.textContent.indexOf(productNameKeywordFuzzyMatchingArray[i]) !== -1) {
                                        titleContent = productPurchaseTipsContentArray[i];
                                        break;
                                    }
                                }
                                
                                message.textContent = titleContent;
                            }
                            
                            popup.appendChild(message);
                            
                            const redMessage = document.createElement("div");
                            redMessage.style.fontSize = "10px";
                            redMessage.textContent = "如果觉得商品有问题请在【"+getCurrentDate()+" 23:50:00】之前联系平台客服";
                            popup.appendChild(redMessage);
        
                            // 时间和日期显示部分
                            const timeWrapper = document.createElement("div");
                            timeWrapper.style.display = "flex";
                            timeWrapper.style.alignItems = "center";
                            timeWrapper.style.justifyContent = "center";
                            timeWrapper.style.marginTop = "10px";
        
                            const icon = document.createElement("div");
                            icon.style.display = "flex";
                            icon.style.alignItems = "center";
                            icon.style.justifyContent = "center";
                            icon.innerHTML =
                              '<svg t="1734251185637" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6871" width="20" height="20"><path d="M526.628571 200.411429c-174.08 0-317.44 141.897143-317.44 317.44C209.188571 691.931429 351.085714 833.828571 526.628571 833.828571s317.44-141.897143 317.44-317.44c0-174.08-143.36-315.977143-317.44-315.977142zM254.537143 545.645714h17.554286c11.702857 0 21.942857-10.24 21.942857-21.942857v-1.462857c0-11.702857-10.24-21.942857-21.942857-21.942857h-17.554286c2.925714-61.44 26.331429-117.028571 64.365714-160.914286l11.702857 11.702857c8.777143 8.777143 21.942857 8.777143 30.72 0 8.777143-8.777143 8.777143-21.942857 0-30.72l-11.702857-11.702857c43.885714-36.571429 99.474286-59.977143 159.451429-64.365714v21.942857c0 11.702857 10.24 21.942857 21.942857 21.942857h1.462857c11.702857 0 21.942857-10.24 21.942857-21.942857v-20.48c61.44 5.851429 118.491429 33.645714 160.914286 74.605714l-13.165714 11.702857c-8.777143 8.777143-8.777143 21.942857 0 30.72 8.777143 8.777143 21.942857 8.777143 30.72 0l11.702857-11.702857c30.72 40.96 51.2 92.16 54.125714 147.748572h-17.554286c-11.702857 0-21.942857 10.24-21.942857 21.942857v1.462857c0 11.702857 10.24 21.942857 21.942857 21.942857h17.554286c-5.851429 55.588571-29.257143 106.788571-62.902857 147.748572l-11.702857-11.702858c-8.777143-8.777143-21.942857-8.777143-30.72 0-8.777143 8.777143-8.777143 21.942857 0 30.72l11.702857 11.702858c-40.96 35.108571-92.16 58.514286-149.211429 64.365714V775.314286c0-11.702857-10.24-21.942857-21.942857-21.942857h-1.462857c-11.702857 0-21.942857 10.24-21.942857 21.942857v14.628571c-55.588571-2.925714-105.325714-23.405714-146.285714-54.125714l10.24-10.24c8.777143-8.777143 8.777143-21.942857 0-30.72-8.777143-8.777143-21.942857-8.777143-30.72 0l-13.165715 13.165714c-42.422857-45.348571-68.754286-100.937143-76.068571-162.377143z" fill="#555555" p-id="6872"></path><path d="M427.154286 709.485714c2.925714 1.462857 7.314286 2.925714 10.24 2.925715 7.314286 0 14.628571-4.388571 19.017143-11.702858l81.92-141.897142c17.554286-2.925714 30.72-19.017143 30.72-36.571429 0-11.702857-5.851429-23.405714-14.628572-29.257143V336.457143c0-11.702857-10.24-21.942857-21.942857-21.942857s-21.942857 10.24-21.942857 21.942857v156.525714c-10.24 7.314286-16.091429 17.554286-16.091429 30.72 0 7.314286 1.462857 13.165714 4.388572 19.017143l-78.994286 137.508571c-7.314286 10.24-2.925714 23.405714 7.314286 29.257143z" fill="#555555" p-id="6873"></path></svg>'; // 时钟图标
                            timeWrapper.appendChild(icon);
        
                            const timeText = document.createElement("div");
                            timeText.style.fontSize = "12px";
                            timeText.style.color = "#555";
                            timeWrapper.appendChild(timeText);
        
                            popup.appendChild(timeWrapper);
        
                            // "确定"按钮
                            const button = document.createElement("button");
                            button.style.marginTop = "20px";
                            button.style.padding = "8px 16px";
                            button.style.backgroundColor = "#4CAF50";
                            button.style.color = "white";
                            button.style.border = "none";
                            button.style.borderRadius = "5px";
                            button.style.cursor = "pointer";
                            button.style.fontSize = "12px";
                            button.textContent = "确定";
                            button.addEventListener("click", function () {
                              popup.style.display = "none"; // 点击确定，销毁弹窗
                            });
                            popup.appendChild(button);
        
                            // 将弹窗添加到页面
                            document.body.appendChild(popup);
        
                            // 弹窗显示
                            popup.style.display = "block";
        
                            // 每秒更新一次时间和日期
                            updateTime(timeText);
                            setInterval(() => updateTime(timeText), 1000); // 每秒调用一次 updateTime 函数
        
                            popupWindow = popup;
                        } else {
                            // 判断点击的地方是否是弹窗外部区域
                            if (!popupWindow.contains(event.target) && popupWindow.style.display !== "none" && !timeoutId) {
                                timeoutId = setTimeout(() => {
                                  popupWindow.style.display = "none"; // 隐藏弹窗
                                  clearTimeout(timeoutId); // 清除定时器，防止执行
                                  timeoutId = null;
                                }, 3000);
                            }
                        }
                        
                    });
                } else {
                    // console.log('URL 不包含 "/item/"');
                    document.addEventListener("click", function () {
                        
                        title = document.querySelector(".van-popup.van-popup--round.van-popup--bottom .layout-home .header .title");
                        
                        if (!title) return;
                        
                        if (!popupWindow) {
                            // 创建弹窗
                            const popup = document.createElement("div");
                            popup.classList.add("popup-zmkj");
        
                            // 使用 JavaScript 设置弹窗样式
                            popup.style.position = "fixed";
                            popup.style.top = "20px";
                            popup.style.left = "50%";
                            popup.style.transform = "translateX(-50%)";
                            popup.style.backgroundColor = "#fff";
                            popup.style.border = "1px solid #ccc";
                            popup.style.padding = "20px";
                            popup.style.boxShadow = "0 2px 10px rgba(0, 0, 0, 0.1)";
                            popup.style.borderRadius = "8px";
                            popup.style.zIndex = "9999";
                            popup.style.width = "280px";
                            popup.style.textAlign = "center";
                            
                            // 弹窗内容
                            const message = document.createElement("div");
                            message.classList.add("title");
                            message.style.fontSize = "16px";
                            
                            if (productNameKeywordFuzzyMatchingArray) {
                                
                                let titleContent = '';
                                
                                for (let i = 0; i < productNameKeywordFuzzyMatchingArray.length; i++) {
                                    if (title.textContent.indexOf(productNameKeywordFuzzyMatchingArray[i]) !== -1) {
                                        titleContent = productPurchaseTipsContentArray[i];
                                        break;
                                    }
                                }
                                
                                message.textContent = titleContent;
                            }
                            
                            popup.appendChild(message);
                            
                            popupMessage = message;
                            
                            const redMessage = document.createElement("div");
                            redMessage.style.fontSize = "10px";
                            redMessage.textContent = "如果觉得商品有问题请在【"+getCurrentDate()+" 23:50:00】之前联系平台客服";
                            popup.appendChild(redMessage);
        
                            // 时间和日期显示部分
                            const timeWrapper = document.createElement("div");
                            timeWrapper.style.display = "flex";
                            timeWrapper.style.alignItems = "center";
                            timeWrapper.style.justifyContent = "center";
                            timeWrapper.style.marginTop = "10px";
        
                            const icon = document.createElement("div");
                            icon.style.display = "flex";
                            icon.style.alignItems = "center";
                            icon.style.justifyContent = "center";
                            icon.innerHTML =
                              '<svg t="1734251185637" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6871" width="20" height="20"><path d="M526.628571 200.411429c-174.08 0-317.44 141.897143-317.44 317.44C209.188571 691.931429 351.085714 833.828571 526.628571 833.828571s317.44-141.897143 317.44-317.44c0-174.08-143.36-315.977143-317.44-315.977142zM254.537143 545.645714h17.554286c11.702857 0 21.942857-10.24 21.942857-21.942857v-1.462857c0-11.702857-10.24-21.942857-21.942857-21.942857h-17.554286c2.925714-61.44 26.331429-117.028571 64.365714-160.914286l11.702857 11.702857c8.777143 8.777143 21.942857 8.777143 30.72 0 8.777143-8.777143 8.777143-21.942857 0-30.72l-11.702857-11.702857c43.885714-36.571429 99.474286-59.977143 159.451429-64.365714v21.942857c0 11.702857 10.24 21.942857 21.942857 21.942857h1.462857c11.702857 0 21.942857-10.24 21.942857-21.942857v-20.48c61.44 5.851429 118.491429 33.645714 160.914286 74.605714l-13.165714 11.702857c-8.777143 8.777143-8.777143 21.942857 0 30.72 8.777143 8.777143 21.942857 8.777143 30.72 0l11.702857-11.702857c30.72 40.96 51.2 92.16 54.125714 147.748572h-17.554286c-11.702857 0-21.942857 10.24-21.942857 21.942857v1.462857c0 11.702857 10.24 21.942857 21.942857 21.942857h17.554286c-5.851429 55.588571-29.257143 106.788571-62.902857 147.748572l-11.702857-11.702858c-8.777143-8.777143-21.942857-8.777143-30.72 0-8.777143 8.777143-8.777143 21.942857 0 30.72l11.702857 11.702858c-40.96 35.108571-92.16 58.514286-149.211429 64.365714V775.314286c0-11.702857-10.24-21.942857-21.942857-21.942857h-1.462857c-11.702857 0-21.942857 10.24-21.942857 21.942857v14.628571c-55.588571-2.925714-105.325714-23.405714-146.285714-54.125714l10.24-10.24c8.777143-8.777143 8.777143-21.942857 0-30.72-8.777143-8.777143-21.942857-8.777143-30.72 0l-13.165715 13.165714c-42.422857-45.348571-68.754286-100.937143-76.068571-162.377143z" fill="#555555" p-id="6872"></path><path d="M427.154286 709.485714c2.925714 1.462857 7.314286 2.925714 10.24 2.925715 7.314286 0 14.628571-4.388571 19.017143-11.702858l81.92-141.897142c17.554286-2.925714 30.72-19.017143 30.72-36.571429 0-11.702857-5.851429-23.405714-14.628572-29.257143V336.457143c0-11.702857-10.24-21.942857-21.942857-21.942857s-21.942857 10.24-21.942857 21.942857v156.525714c-10.24 7.314286-16.091429 17.554286-16.091429 30.72 0 7.314286 1.462857 13.165714 4.388572 19.017143l-78.994286 137.508571c-7.314286 10.24-2.925714 23.405714 7.314286 29.257143z" fill="#555555" p-id="6873"></path></svg>'; // 时钟图标
                            timeWrapper.appendChild(icon);
        
                            const timeText = document.createElement("div");
                            timeText.style.fontSize = "12px";
                            timeText.style.color = "#555";
                            timeWrapper.appendChild(timeText);
        
                            popup.appendChild(timeWrapper);
        
                            // "确定"按钮
                            const button = document.createElement("button");
                            button.style.marginTop = "20px";
                            button.style.padding = "8px 16px";
                            button.style.backgroundColor = "#4CAF50";
                            button.style.color = "white";
                            button.style.border = "none";
                            button.style.borderRadius = "5px";
                            button.style.cursor = "pointer";
                            button.style.fontSize = "12px";
                            button.textContent = "确定";
                            button.addEventListener("click", function () {
                              popup.style.display = "none"; // 点击确定，销毁弹窗
                            });
                            popup.appendChild(button);
        
                            // 将弹窗添加到页面
                            document.body.appendChild(popup);
        
                            // 弹窗显示
                            popup.style.display = "block";
        
                            // 每秒更新一次时间和日期
                            updateTime(timeText);
                            setInterval(() => updateTime(timeText), 1000); // 每秒调用一次 updateTime 函数
        
                            popupWindow = popup;
                        } else {
                            
                            // 判断点击的地方是否是弹窗外部区域
                            if (!popupWindow.contains(event.target) && popupWindow.style.display !== "none" && !timeoutId) {
                                timeoutId = setTimeout(() => {
                                  popupWindow.style.display = "none"; // 隐藏弹窗
                                  clearInterval(timeoutId);
                                  timeoutId = null;
                                }, 1500);
                            }
                            
                            // 判断点击的元素是否是 .goods_item 类的子元素
                            const clickedElement = event.target.closest('.goods-item');
                            
                            if (clickedElement) {
                                if (productNameKeywordFuzzyMatchingArray) {
                                
                                    let titleContent = '';
                                    
                                    for (let i = 0; i < productNameKeywordFuzzyMatchingArray.length; i++) {
                                        if (title.textContent.indexOf(productNameKeywordFuzzyMatchingArray[i]) !== -1) {
                                            titleContent = productPurchaseTipsContentArray[i];
                                            break;
                                        }
                                    }
                                    
                                    popupMessage.textContent = titleContent;
                                }
                                clearInterval(timeoutId);
                                timeoutId = null;
                                popupWindow.style.display = "block";
                            }
                        }
                        
                    });
                }
            })();
            
          } else {
            // console.log('当前不是移动端设备');
            (function () {
                
                let popupWindow;
                let title;
                let timeoutId;
                let popupMessage;
                
                const fullUrl = window.location.href;
                
                if (fullUrl.includes('/item/')) {
                    // console.log('URL 包含 "/item/"');
                    document.addEventListener("click", function () {
                        
                        title = document.querySelector(".arco-spin.spin-center .app-detail .detail-header .detail-header-info .header-left .header-left-info .info-title");
                        if (!title) return;
                        
                        if (!popupWindow) {
                            // 创建弹窗
                            const popup = document.createElement("div");
                            popup.classList.add("popup-zmkj");
        
                            // 使用 JavaScript 设置弹窗样式
                            popup.style.position = "fixed";
                            popup.style.top = "20px";
                            popup.style.left = "50%";
                            popup.style.transform = "translateX(-50%)";
                            popup.style.backgroundColor = "#fff";
                            popup.style.border = "1px solid #ccc";
                            popup.style.padding = "20px";
                            popup.style.boxShadow = "0 2px 10px rgba(0, 0, 0, 0.1)";
                            popup.style.borderRadius = "8px";
                            popup.style.zIndex = "9999";
                            popup.style.width = "300px";
                            popup.style.textAlign = "center";
                            
                            // 弹窗内容
                            const message = document.createElement("div");
                            message.classList.add("title");
                            message.style.fontSize = "16px";
                            
                            if (productNameKeywordFuzzyMatchingArray) {
                                
                                let titleContent = '';
                                
                                for (let i = 0; i < productNameKeywordFuzzyMatchingArray.length; i++) {
                                    if (title.textContent.indexOf(productNameKeywordFuzzyMatchingArray[i]) !== -1) {
                                        titleContent = productPurchaseTipsContentArray[i];
                                        break;
                                    }
                                }
                                
                                message.textContent = titleContent;
                            }
                            
                            popup.appendChild(message);
                            
                            const redMessage = document.createElement("div");
                            redMessage.style.fontSize = "10px";
                            redMessage.textContent = "如果觉得商品有问题请在【"+getCurrentDate()+" 23:50:00】之前联系平台客服";
                            popup.appendChild(redMessage);
        
                            // 时间和日期显示部分
                            const timeWrapper = document.createElement("div");
                            timeWrapper.style.display = "flex";
                            timeWrapper.style.alignItems = "center";
                            timeWrapper.style.justifyContent = "center";
                            timeWrapper.style.marginTop = "10px";
        
                            const icon = document.createElement("div");
                            icon.style.display = "flex";
                            icon.style.alignItems = "center";
                            icon.style.justifyContent = "center";
                            icon.innerHTML =
                              '<svg t="1734251185637" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6871" width="20" height="20"><path d="M526.628571 200.411429c-174.08 0-317.44 141.897143-317.44 317.44C209.188571 691.931429 351.085714 833.828571 526.628571 833.828571s317.44-141.897143 317.44-317.44c0-174.08-143.36-315.977143-317.44-315.977142zM254.537143 545.645714h17.554286c11.702857 0 21.942857-10.24 21.942857-21.942857v-1.462857c0-11.702857-10.24-21.942857-21.942857-21.942857h-17.554286c2.925714-61.44 26.331429-117.028571 64.365714-160.914286l11.702857 11.702857c8.777143 8.777143 21.942857 8.777143 30.72 0 8.777143-8.777143 8.777143-21.942857 0-30.72l-11.702857-11.702857c43.885714-36.571429 99.474286-59.977143 159.451429-64.365714v21.942857c0 11.702857 10.24 21.942857 21.942857 21.942857h1.462857c11.702857 0 21.942857-10.24 21.942857-21.942857v-20.48c61.44 5.851429 118.491429 33.645714 160.914286 74.605714l-13.165714 11.702857c-8.777143 8.777143-8.777143 21.942857 0 30.72 8.777143 8.777143 21.942857 8.777143 30.72 0l11.702857-11.702857c30.72 40.96 51.2 92.16 54.125714 147.748572h-17.554286c-11.702857 0-21.942857 10.24-21.942857 21.942857v1.462857c0 11.702857 10.24 21.942857 21.942857 21.942857h17.554286c-5.851429 55.588571-29.257143 106.788571-62.902857 147.748572l-11.702857-11.702858c-8.777143-8.777143-21.942857-8.777143-30.72 0-8.777143 8.777143-8.777143 21.942857 0 30.72l11.702857 11.702858c-40.96 35.108571-92.16 58.514286-149.211429 64.365714V775.314286c0-11.702857-10.24-21.942857-21.942857-21.942857h-1.462857c-11.702857 0-21.942857 10.24-21.942857 21.942857v14.628571c-55.588571-2.925714-105.325714-23.405714-146.285714-54.125714l10.24-10.24c8.777143-8.777143 8.777143-21.942857 0-30.72-8.777143-8.777143-21.942857-8.777143-30.72 0l-13.165715 13.165714c-42.422857-45.348571-68.754286-100.937143-76.068571-162.377143z" fill="#555555" p-id="6872"></path><path d="M427.154286 709.485714c2.925714 1.462857 7.314286 2.925714 10.24 2.925715 7.314286 0 14.628571-4.388571 19.017143-11.702858l81.92-141.897142c17.554286-2.925714 30.72-19.017143 30.72-36.571429 0-11.702857-5.851429-23.405714-14.628572-29.257143V336.457143c0-11.702857-10.24-21.942857-21.942857-21.942857s-21.942857 10.24-21.942857 21.942857v156.525714c-10.24 7.314286-16.091429 17.554286-16.091429 30.72 0 7.314286 1.462857 13.165714 4.388572 19.017143l-78.994286 137.508571c-7.314286 10.24-2.925714 23.405714 7.314286 29.257143z" fill="#555555" p-id="6873"></path></svg>'; // 时钟图标
                            timeWrapper.appendChild(icon);
        
                            const timeText = document.createElement("div");
                            timeText.style.fontSize = "12px";
                            timeText.style.color = "#555";
                            timeWrapper.appendChild(timeText);
        
                            popup.appendChild(timeWrapper);
        
                            // "确定"按钮
                            const button = document.createElement("button");
                            button.style.marginTop = "20px";
                            button.style.padding = "8px 16px";
                            button.style.backgroundColor = "#4CAF50";
                            button.style.color = "white";
                            button.style.border = "none";
                            button.style.borderRadius = "5px";
                            button.style.cursor = "pointer";
                            button.style.fontSize = "12px";
                            button.textContent = "确定";
                            button.addEventListener("click", function () {
                              popup.style.display = "none"; // 点击确定，销毁弹窗
                            });
                            popup.appendChild(button);
        
                            // 将弹窗添加到页面
                            document.body.appendChild(popup);
        
                            // 弹窗显示
                            popup.style.display = "block";
        
                            // 每秒更新一次时间和日期
                            updateTime(timeText);
                            setInterval(() => updateTime(timeText), 1000); // 每秒调用一次 updateTime 函数
        
                            popupWindow = popup;
                        } else {
                            // 判断点击的地方是否是弹窗外部区域
                            if (!popupWindow.contains(event.target) && popupWindow.style.display !== "none" && !timeoutId) {
                                timeoutId = setTimeout(() => {
                                  popupWindow.style.display = "none"; // 隐藏弹窗
                                  clearTimeout(timeoutId); // 清除定时器，防止执行
                                  timeoutId = null;
                                }, 3000);
                            }
                        }
                    });
                } else {
                    // console.log('URL 不包含 "/item/"');
                    document.addEventListener("click", function () {
                        
                        title = document.querySelector(".arco-modal-container .arco-modal-wrapper.arco-modal-wrapper-align-center .arco-modal.confirm_order .arco-modal-body #confirm_order_number .pr_name_box .pr_name");
                        
                        if (!title) return;
                        
                        if (!popupWindow) {
                            // 创建弹窗
                            const popup = document.createElement("div");
                            popup.classList.add("popup-zmkj");
        
                            // 使用 JavaScript 设置弹窗样式
                            popup.style.position = "fixed";
                            popup.style.top = "20px";
                            popup.style.left = "50%";
                            popup.style.transform = "translateX(-50%)";
                            popup.style.backgroundColor = "#fff";
                            popup.style.border = "1px solid #ccc";
                            popup.style.padding = "20px";
                            popup.style.boxShadow = "0 2px 10px rgba(0, 0, 0, 0.1)";
                            popup.style.borderRadius = "8px";
                            popup.style.zIndex = "9999";
                            popup.style.width = "300px";
                            popup.style.textAlign = "center";
                            
                            // 弹窗内容
                            const message = document.createElement("div");
                            message.classList.add("title");
                            message.style.fontSize = "16px";
                            
                            if (productNameKeywordFuzzyMatchingArray) {
                                
                                let titleContent = '';
                                
                                for (let i = 0; i < productNameKeywordFuzzyMatchingArray.length; i++) {
                                    if (title.textContent.indexOf(productNameKeywordFuzzyMatchingArray[i]) !== -1) {
                                        titleContent = productPurchaseTipsContentArray[i];
                                        break;
                                    }
                                }
                                
                                message.textContent = titleContent;
                            }
                            
                            popup.appendChild(message);
                            
                            popupMessage = message;
                            
                            const redMessage = document.createElement("div");
                            redMessage.style.fontSize = "10px";
                            redMessage.textContent = "如果觉得商品有问题请在【"+getCurrentDate()+" 23:50:00】之前联系平台客服";
                            popup.appendChild(redMessage);
        
                            // 时间和日期显示部分
                            const timeWrapper = document.createElement("div");
                            timeWrapper.style.display = "flex";
                            timeWrapper.style.alignItems = "center";
                            timeWrapper.style.justifyContent = "center";
                            timeWrapper.style.marginTop = "10px";
        
                            const icon = document.createElement("div");
                            icon.style.display = "flex";
                            icon.style.alignItems = "center";
                            icon.style.justifyContent = "center";
                            icon.innerHTML =
                              '<svg t="1734251185637" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6871" width="20" height="20"><path d="M526.628571 200.411429c-174.08 0-317.44 141.897143-317.44 317.44C209.188571 691.931429 351.085714 833.828571 526.628571 833.828571s317.44-141.897143 317.44-317.44c0-174.08-143.36-315.977143-317.44-315.977142zM254.537143 545.645714h17.554286c11.702857 0 21.942857-10.24 21.942857-21.942857v-1.462857c0-11.702857-10.24-21.942857-21.942857-21.942857h-17.554286c2.925714-61.44 26.331429-117.028571 64.365714-160.914286l11.702857 11.702857c8.777143 8.777143 21.942857 8.777143 30.72 0 8.777143-8.777143 8.777143-21.942857 0-30.72l-11.702857-11.702857c43.885714-36.571429 99.474286-59.977143 159.451429-64.365714v21.942857c0 11.702857 10.24 21.942857 21.942857 21.942857h1.462857c11.702857 0 21.942857-10.24 21.942857-21.942857v-20.48c61.44 5.851429 118.491429 33.645714 160.914286 74.605714l-13.165714 11.702857c-8.777143 8.777143-8.777143 21.942857 0 30.72 8.777143 8.777143 21.942857 8.777143 30.72 0l11.702857-11.702857c30.72 40.96 51.2 92.16 54.125714 147.748572h-17.554286c-11.702857 0-21.942857 10.24-21.942857 21.942857v1.462857c0 11.702857 10.24 21.942857 21.942857 21.942857h17.554286c-5.851429 55.588571-29.257143 106.788571-62.902857 147.748572l-11.702857-11.702858c-8.777143-8.777143-21.942857-8.777143-30.72 0-8.777143 8.777143-8.777143 21.942857 0 30.72l11.702857 11.702858c-40.96 35.108571-92.16 58.514286-149.211429 64.365714V775.314286c0-11.702857-10.24-21.942857-21.942857-21.942857h-1.462857c-11.702857 0-21.942857 10.24-21.942857 21.942857v14.628571c-55.588571-2.925714-105.325714-23.405714-146.285714-54.125714l10.24-10.24c8.777143-8.777143 8.777143-21.942857 0-30.72-8.777143-8.777143-21.942857-8.777143-30.72 0l-13.165715 13.165714c-42.422857-45.348571-68.754286-100.937143-76.068571-162.377143z" fill="#555555" p-id="6872"></path><path d="M427.154286 709.485714c2.925714 1.462857 7.314286 2.925714 10.24 2.925715 7.314286 0 14.628571-4.388571 19.017143-11.702858l81.92-141.897142c17.554286-2.925714 30.72-19.017143 30.72-36.571429 0-11.702857-5.851429-23.405714-14.628572-29.257143V336.457143c0-11.702857-10.24-21.942857-21.942857-21.942857s-21.942857 10.24-21.942857 21.942857v156.525714c-10.24 7.314286-16.091429 17.554286-16.091429 30.72 0 7.314286 1.462857 13.165714 4.388572 19.017143l-78.994286 137.508571c-7.314286 10.24-2.925714 23.405714 7.314286 29.257143z" fill="#555555" p-id="6873"></path></svg>'; // 时钟图标
                            timeWrapper.appendChild(icon);
        
                            const timeText = document.createElement("div");
                            timeText.style.fontSize = "12px";
                            timeText.style.color = "#555";
                            timeWrapper.appendChild(timeText);
        
                            popup.appendChild(timeWrapper);
        
                            // "确定"按钮
                            const button = document.createElement("button");
                            button.style.marginTop = "20px";
                            button.style.padding = "8px 16px";
                            button.style.backgroundColor = "#4CAF50";
                            button.style.color = "white";
                            button.style.border = "none";
                            button.style.borderRadius = "5px";
                            button.style.cursor = "pointer";
                            button.style.fontSize = "12px";
                            button.textContent = "确定";
                            button.addEventListener("click", function () {
                              popup.style.display = "none"; // 点击确定，销毁弹窗
                            });
                            popup.appendChild(button);
        
                            // 将弹窗添加到页面
                            document.body.appendChild(popup);
        
                            // 弹窗显示
                            popup.style.display = "block";
        
                            // 每秒更新一次时间和日期
                            updateTime(timeText);
                            setInterval(() => updateTime(timeText), 1000); // 每秒调用一次 updateTime 函数
        
                            popupWindow = popup;
                        } else {
                            
                            // 判断点击的地方是否是弹窗外部区域
                            if (!popupWindow.contains(event.target) && popupWindow.style.display !== "none" && !timeoutId) {
                                timeoutId = setTimeout(() => {
                                  popupWindow.style.display = "none"; // 隐藏弹窗
                                  clearInterval(timeoutId);
                                  timeoutId = null;
                                }, 1500);
                            }
                            
                            // 判断点击的元素是否是 .goods_item 类的子元素
                            const clickedElement = event.target.closest('.goods_item');
                            
                            if (clickedElement) {
                                if (productNameKeywordFuzzyMatchingArray) {
                                
                                    let titleContent = '';
                                    
                                    for (let i = 0; i < productNameKeywordFuzzyMatchingArray.length; i++) {
                                        if (title.textContent.indexOf(productNameKeywordFuzzyMatchingArray[i]) !== -1) {
                                            titleContent = productPurchaseTipsContentArray[i];
                                            break;
                                        }
                                    }
                                    
                                    popupMessage.textContent = titleContent;
                                }
                                clearInterval(timeoutId);
                                timeoutId = null;
                                popupWindow.style.display = "block";
                            }
                        }
                        
                    });
                }
            })();
          }
        }
        
        // 更新当前时间和日期
        function updateTime(element) {
          const now = new Date();

          // 获取当前时间
          const hours = now.getHours().toString().padStart(2, "0");
          const minutes = now
            .getMinutes()
            .toString()
            .padStart(2, "0");
          const seconds = now
            .getSeconds()
            .toString()
            .padStart(2, "0");
          const timeString = `${hours}:${minutes}:${seconds}`;

          // 获取当前日期
          const year = now.getFullYear();
          const month = (now.getMonth() + 1)
            .toString()
            .padStart(2, "0"); // 月份从0开始
          const day = now.getDate().toString().padStart(2, "0");
          const dateString = `${year}年${month}月${day}日`;

          // 更新显示当前日期和时间
          element.textContent = `当前时间：${dateString} ${timeString}`;
        }
        
        function getCurrentDate() {
          const date = new Date();
        
          const year = date.getFullYear(); // 获取年份
          const month = date.getMonth() + 1; // 获取月份，注意：getMonth() 返回的是 0-11，所以需要加 1
          const day = date.getDate(); // 获取日期
        
          // 格式化为 'yyyy年m月d日' 格式
          return `${year}年${month}月${day}日`;
        }
        
      })
      .catch((error) => console.error("Error fetching params:", error));
  })();